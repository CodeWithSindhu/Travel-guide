const s={},c="https://restcountries.com/v3.1",i=async o=>{try{const t=await fetch(`${c}/name/${o}`);if(!t.ok)throw new Error(`Country not found: ${t.statusText}`);const n=await t.json(),a=n.find(e=>e.name.common.toLowerCase()===o.toLowerCase())||n[0];return{name:a.name.common,officialName:a.name.official,region:a.region,subregion:a.subregion,capital:a.capital?a.capital[0]:"N/A",population:a.population,flags:a.flags,startOfWeek:a.startOfWeek,latlng:a.latlng,apiData:a}}catch(t){throw console.error("Error fetching country:",t),t}},l=async()=>{try{const o=localStorage.getItem("all_countries_cache");if(o){const{timestamp:a,data:e}=JSON.parse(o);if(Date.now()-a<864e5)return e}const t=await fetch(`${c}/all?fields=name,cca2,region,flags,population,capital`);if(!t.ok)throw new Error(`Failed to fetch countries: ${t.statusText}`);const r=(await t.json()).map(a=>({name:a.name.common,cca2:a.cca2,region:a.region,flag:a.flags.svg||a.flags.png,population:a.population,capital:a.capital?a.capital[0]:"N/A"})).sort((a,e)=>a.name.localeCompare(e.name));return localStorage.setItem("all_countries_cache",JSON.stringify({timestamp:Date.now(),data:r})),r}catch(o){return console.error("Error fetching all countries:",o),[]}};export{l as a,s as c,i as f};
