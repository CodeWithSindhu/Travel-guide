import{a as M,b as P,r as g,j as e,L}from"./index-UJ2fxlni.js";import{g as b}from"./unsplash-BF0KC5JQ.js";import{a as A}from"./cities-ErRX3vH8.js";import{C as B}from"./CityMap-Drlez81d.js";import{S as I}from"./SEO-CQYmAznP.js";const T="https://nominatim.openstreetmap.org/search",S={mumbai:["Gateway of India","Marine Drive","Chhatrapati Shivaji Maharaj Terminus","Elephanta Caves","Haji Ali Dargah","Siddhivinayak Temple"],delhi:["Red Fort","India Gate","Qutub Minar","Humayun's Tomb","Lotus Temple","Akshardham"],"new delhi":["Red Fort","India Gate","Qutub Minar","Humayun's Tomb","Lotus Temple","Akshardham"],bengaluru:["Bangalore Palace","Lalbagh Botanical Garden","Cubbon Park","Tipu Sultan's Summer Palace","ISKCON Temple"],bangalore:["Bangalore Palace","Lalbagh Botanical Garden","Cubbon Park","Tipu Sultan's Summer Palace","ISKCON Temple"],hyderabad:["Charminar","Golconda Fort","Ramoji Film City","Hussain Sagar Lake","Chowmahalla Palace"],chennai:["Marina Beach","Kapaleeshwarar Temple","Fort St. George","San Thome Cathedral"],kolkata:["Victoria Memorial","Howrah Bridge","Dakshineswar Kali Temple","Indian Museum"],jaipur:["Hawa Mahal","Amber Palace","City Palace","Jantar Mantar","Nahargarh Fort"],udaipur:["City Palace","Lake Pichola","Jag Mandir","Saheliyon Ki Bari"],agra:["Taj Mahal","Agra Fort","Mehtab Bagh","Tomb of Akbar the Great"],paris:["Eiffel Tower","Louvre Museum","Notre-Dame Cathedral","Arc de Triomphe","Sacre-Coeur"],london:["Big Ben","Tower of London","London Eye","Buckingham Palace","British Museum"],"new york":["Statue of Liberty","Central Park","Empire State Building","Times Square","Brooklyn Bridge"],dubai:["Burj Khalifa","The Dubai Mall","Palm Jumeirah","Burj Al Arab","Dubai Marina"]},q=async a=>{if(!a)return[];console.log(`Fetching dynamic places for ${a}...`);const m=a.toLowerCase().trim();let c=[];if(S[m]){console.log(`Using curated landmarks for ${a}`);const n=S[m].map(async r=>{let d=null,p=null;try{const l=await(await fetch(`${T}?q=${encodeURIComponent(r+" "+a)}&format=json&limit=1`)).json();l&&l.length>0&&(d=l[0].lat,p=l[0].lon)}catch{console.warn(`Could not fetch coords for ${r}`)}return{name:r,type:"attraction",descriptor:"Must Visit",lat:d,lon:p}});c=await Promise.all(n)}else{console.log(`Using Nominatim search for ${a}`);const s=[`tourism in ${a}`,`attractions in ${a}`,`landmark in ${a}`];try{const n=s.map(i=>fetch(`${T}?q=${encodeURIComponent(i)}&format=json&addressdetails=1&limit=8&accept-language=en`).then(l=>l.json())),d=(await Promise.all(n)).flat(),p=new Set;for(const i of d){const l=i.name||"";if(!l||l.toLowerCase()===m)continue;const f=l.toLowerCase();p.has(f)||(p.add(f),["hotel","hostel","guest house","motel","road","street","way","lane","district","region"].some(w=>f.includes(w)))||c.push({name:l,type:i.type,lat:i.lat,lon:i.lon,importance:i.importance||0,descriptor:E(i.type||i.category||"attraction")})}c.sort((i,l)=>l.importance-i.importance),c=c.slice(0,6)}catch(n){console.error("Nominatim search failed:",n)}}return c.length===0?[]:await Promise.all(c.map(async s=>{const n=`${s.name} ${a}`,r=await b(n);return{name:s.name,descriptor:s.descriptor,lat:s.lat,lon:s.lon,query:n,image:r||`https://loremflickr.com/800/600/${a},landmark,${s.name.replace(/\s+/g,",")}`}}))},E=a=>a==="yes"?"Attraction":a.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase()),D=async a=>{if(!a)return null;try{const c=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(a)}&format=json&limit=1`);if(!c.ok)throw new Error(`Nominatim error: ${c.status}`);const h=await c.json();if(h&&h.length>0)return{lat:parseFloat(h[0].lat),lon:parseFloat(h[0].lon)}}catch(m){console.warn("Error fetching city coordinates:",m)}return null},_=()=>{const{city:a,country:m}=M(),{toggleWishlist:c,isInWishlist:h}=P(),s=m?m.charAt(0).toUpperCase()+m.slice(1):"",n=a?a.charAt(0).toUpperCase()+a.slice(1):"Destination",[r,d]=g.useState(null),[p,i]=g.useState([]),[l,f]=g.useState(!0),[k,w]=g.useState(null),[R,$]=g.useState(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}));return g.useEffect(()=>{const t=setInterval(()=>{$(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>clearInterval(t)},[]),g.useEffect(()=>{const t=async()=>{const x={name:n,identity:`The heartbeat of ${s||"the region"}`,image:`https://loremflickr.com/1600/900/${a},city,landmark`,quickFacts:{region:s||"Local Region",bestTime:"Year-round",knownFor:"Culture & Sights",duration:"3â€“4 Days",vibe:"Vibrant & Welcoming"},places:[{name:"City Center",query:"downtown square",descriptor:"Heart of the City"},{name:"National Museum",query:"museum architecture",descriptor:"History & Art"},{name:"Central Park",query:"park garden",descriptor:"Nature & Relax"},{name:"Local Market",query:"market food",descriptor:"Shopping & Cuisine"},{name:"Historic Old Town",query:"old street",descriptor:"Heritage"},{name:"Waterfront / Viewpoint",query:"river view",descriptor:"Scenic Views"}],interests:[{name:"History & Landmarks",query:"history landmark"},{name:"Food & Dining",query:"food restaurant"},{name:"Art & Culture",query:"art gallery"},{name:"Nightlife",query:"night city"}],tips:[`Explore ${n} by walking to soak in the atmosphere.`,"Try the local street food for authentic flavors.","Visit main attractions early to avoid crowds."]};d(x),f(!1);try{b(`${a} city landmark`).then(o=>{o&&d(u=>({...u,image:o}))}),D(a).then(o=>{o&&w([o.lat,o.lon])}),q(a).then(async o=>{let u=o;if(!o||o.length===0){const v=x.places.map(async N=>{const C=await b(`${a} ${N.query}`);return C?{...N,image:C}:N});u=await Promise.all(v)}d(v=>({...v,places:u}))});const j=x.interests.map(async o=>{const u=await b(`${a} ${o.query}`);return u?{...o,image:u}:o});Promise.all(j).then(o=>{d(u=>({...u,interests:o}))})}catch(j){console.error("Error updating city data in background:",j)}},y=async()=>{try{A(a).then(x=>{i(x)})}catch(x){console.warn("Could not fetch nearby cities",x)}};a&&(t(),y())},[a,s]),l?e.jsx("div",{className:"flex-grow flex items-center justify-center bg-white",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"h-12 w-12 border-4 border-teal-500 border-t-transparent rounded-full animate-spin mb-4"}),e.jsxs("p",{className:"text-gray-500 font-medium",children:["Curating your guide to ",n,"..."]})]})}):r?e.jsxs("div",{className:"bg-white flex-grow",children:[e.jsx(I,{title:`${n}, ${s} - City Guide`,description:`Explore the best of ${n}. Top attractions, food, culture, and travel tips for your ${n} adventure.`,image:r.image}),e.jsxs("section",{className:"relative h-[50vh] min-h-[500px] flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover scale-105 animate-slow-zoom"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-black/60"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-4 text-center text-white flex flex-col items-center justify-center h-full pt-10",children:[e.jsx("h1",{className:"font-serif text-4xl md:text-9xl font-medium tracking-tight mb-6 drop-shadow-2xl opacity-0 animate-fade-in-up",children:r.name}),e.jsx("div",{className:"h-px w-24 bg-white/50 mb-6 opacity-0 animate-fade-in-up animation-delay-300"}),e.jsx("p",{className:"font-sans text-sm md:text-base uppercase tracking-[0.3em] text-white/90 font-medium drop-shadow-md opacity-0 animate-fade-in-up animation-delay-500",children:r.identity}),e.jsxs("div",{className:"absolute bottom-10 flex flex-col items-center gap-2 text-white/60 animate-bounce pointer-events-none opacity-0 animate-fade-in delay-1000",children:[e.jsx("span",{className:"text-[10px] font-bold tracking-[0.2em] uppercase",children:"Explore"}),e.jsx("svg",{className:"w-5 h-5 opacity-80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})]})]}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 mb-20 mt-24",children:[e.jsxs("div",{className:"text-center md:text-left mb-10 pl-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Top places to visit"}),e.jsxs("p",{className:"text-gray-500 mt-2",children:["Must-see attractions in ",r.name]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.places.map(t=>e.jsxs(L,{to:`/attraction/${t.name.toLowerCase().replace(/ /g,"-")}`,className:"group cursor-pointer block",children:[e.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-4 bg-gray-100 shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:-translate-y-1",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors duration-300"})]}),e.jsxs("div",{className:"px-1",children:[e.jsx("span",{className:"text-xs font-bold text-teal-600 uppercase tracking-wider block mb-1",children:t.descriptor}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center justify-between group-hover:text-teal-700 transition-colors",children:[t.name,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),c({id:t.name,type:"attraction",name:t.name,image:t.image,city:a,country:s})},className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${h(t.name,"attraction")?"text-red-500 bg-red-50":"text-gray-300 hover:text-red-500 hover:bg-red-50"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:h(t.name,"attraction")?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-teal-600 group-hover:translate-x-1 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})]},t.name))})]}),e.jsx("section",{className:"bg-gray-50 py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center md:text-left mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Explore by interest"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Curated experiences for every traveler type"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:r.interests.map(t=>e.jsxs("div",{className:"group relative aspect-[3/4] rounded-2xl overflow-hidden cursor-pointer shadow-md hover:shadow-xl transition-all hover:-translate-y-1",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black/90"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-5 w-full",children:[e.jsx("span",{className:"block text-xs text-teal-300 font-medium mb-1 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0 duration-300",children:"Discover"}),e.jsxs("h3",{className:"text-white font-bold text-lg md:text-xl leading-tight",children:[t.name," in ",r.name]})]})]},t.name))})]})}),p.length>0&&e.jsx("section",{className:"py-20 bg-white border-t border-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center md:text-left mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Explore Nearby"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Discover destinations just a short trip away"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map(t=>e.jsxs(L,{to:`/country/${s?s.toLowerCase():"dest"}/city/${t.name.toLowerCase()}`,className:"group block",children:[e.jsxs("div",{className:"relative aspect-[4/3] rounded-2xl overflow-hidden mb-4 bg-gray-100 shadow-sm group-hover:shadow-md transition-all",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"}),e.jsx("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-teal-700 shadow-sm",children:t.distance})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-900 group-hover:text-teal-600 transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:t.description})]},t.name))})]})}),e.jsx("section",{className:"max-w-7xl mx-auto px-4 py-20",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Explore places on the map"}),e.jsx("p",{className:"text-gray-500",children:"View attractions geographically to plan your route"})]}),e.jsx("div",{className:"relative w-full max-w-full aspect-video rounded-3xl overflow-hidden shadow-lg bg-gray-200 group min-h-[500px]",children:e.jsx(B,{center:k,places:r.places,cityName:r.name})})]})})]}):e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:'City not found. Try "New Delhi".'})})};export{_ as default};
