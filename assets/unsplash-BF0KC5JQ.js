const c="8jqOKn-a8GjWX6G5HjXp3d9A1zs0BEAzhbTJnkUDYl4",i="https://api.unsplash.com",h=async(r,s="landscape")=>{const a=`unsplash_${r}_${s}`,o=localStorage.getItem(a);if(o)try{const{url:e,timestamp:t}=JSON.parse(o);if(Date.now()-t<864e5)return e}catch(e){console.warn("Error parsing cached image data",e),localStorage.removeItem(a)}try{const e=await fetch(`${i}/search/photos?query=${encodeURIComponent(r)}&per_page=1&orientation=${s}`,{headers:{Authorization:`Client-ID ${c}`}});if(!e.ok)throw new Error(`Unsplash API error: ${e.statusText}`);const t=await e.json();if(t.results&&t.results.length>0){const n=t.results[0].urls.regular;try{localStorage.setItem(a,JSON.stringify({url:n,timestamp:Date.now()}))}catch(l){console.warn("Failed to save to localStorage (likely quota exceeded)",l)}return n}return null}catch(e){return e.message.includes("403")?console.warn("Unsplash rate limit hit. Switching to fallback images."):console.error("Error fetching Unsplash image:",e),null}};export{h as g};
